---
tags:
  - c语言
  - 指针
---
### 指针数组

指针数组是一个存放指针的数组,可以理解成一个[[数组^二维数组的创建和初始化|二维数组]]

```c
int* arr1[10];  //整型指针的数组
char* arr2[4];  //一级字符指针的数组
char** arr3[5]; //二级字符指针的数组
```

#### 指针数组和数组指针的区别

指针数组是数组

数组指针是指向数组的指针

#### 指针数组的作用

```c
int arr1[]={1,2,3,4,5};
int arr2[]={2,3,4,5,6};
int arr3[]={3,4,5,6,7};

int* parr={arr1,arr2,arr3};
```

因为 `arr1` 是整型的地址，所以（指针）必须是 **整型指针 (`int*`)**。



#### 指针数组的打印

```c
printf("%d",*(parr[i]+j)) //两种表达方式等价
printf("%d",parr[i][j])   //等价于二维数组的表示
```

##### 指向字符串的指针数组
C 语言中，`char *` 类型的指针数组常用来表示“字符串列表”。此时 `printf` 的 `%s` 会自动完成解引用。
```c
char *names[] = {"Apple", "Banana", "Cherry"};

for (int i = 0; i < 3; i++) {
    // 注意：这里不需要加 *，因为 %s 接收的就是 char* 地址
    printf("水果名称: %s\n", names[i]); 
}
```

#### 与二维数组的区别

二维数组在内存中连续存放

指针数组指向的数组在内存中不一定连续存放



![[截屏2025-12-29 下午3.51.58.png|400]]

## 数组指针



### 数组指针的定义

必须使用**括号**将指针变量名括起来：

```c
int (*pi)[5]=&arr;  //定义的示例,&arr表示取出整个数组的地址
```

原因：在 C 语言中，`[]` 的优先级比 `*` 高，必须使用 `()`，将`pi` 强制定义为一个**指针**。

`pi`是一个指向数组`arr`的指针，对应数组有5个整型元素

此时`pi`**（对指针解引用）等价于“数组名”。**[[编程语言/c语言/c语言进阶/指针进阶/练习题#^1af50c|习题]]

`pi` 这个指针变量的类型严格写作：**`int (*)[5]`** 。

#### 普通指针和数组指针区别

1. “步长”不同（执行 `pi + 1`：内存地址增加 **20** 字节（跳过**整个**数组））
2. 解引用的结果不同（ **解引用结果 `*pi`**：等价于数组名 `arr`（即指向首元素的地址）。）

##### 代码检验

```c
#include <stdio.h>

int main() {
    int arr[10] = {0}; // 一个包含10个int的数组
    
    int *p1 = arr;           // 情况1：指向首元素的指针
    int (*p2)[10] = &arr;    // 情况2：指向整个数组的指针

    // 1. 打印地址数值：值一模一样
    printf("p1 的地址: %p\n", p1);
    printf("p2 的地址: %p\n", p2);
    
    printf("----------------\n");

    // 2. 区别
    printf("p1 + 1 : %p (跳过了 4 字节)\n", p1 + 1);
    printf("p2 + 1 : %p (跳过了 40 字节)\n", p2 + 1);

    return 0;
}
```



## 数组参数、指针参数

### 一维数组传参

数组传参的三种表示方式：[[数组#^0339bd|数组传参的方式]]

**指针数组传参：**

```c
int* arr2[20];
test(arr2); //数组传参的时候直接写数组名

void test(int** arr){
};
void test(int* arr[]){
};
```

### 二维数组传参

```c
void test(int arr[3][5]){
};
void test(int arr[][5]){
};
void test(int arr[][]){    //程序报错
};
void test(int (*arr)[5]){  //使用数组指针传参
};
```

**二维数组的形式参数，可以省略行，但是不能省略列**[[数组#^d117cf|二维数组的创建]]

#### 总结

- **C 语言的数组传参**：只传“首地址”，不传“形状”。[[数组#^ddd149|数组传参时“退化”]]
- **必须定列宽**：为了让编译器知道怎么从上一行“跳”到下一行（计算内存偏移量）。
- **可以省行数**：因为计算单次跳转的距离不需要知道总行数。



### 一级指针传参

```c
#include <stdio.h>

void print(int *p, int sz)
{
    int i = 0;
    for(i=0; i<sz; i++)
    {
        printf("%d\n", *(p+i));
    }
}

int main()
{
    int arr[10] = {1,2,3,4,5,6,7,8,9};
    int *p = arr;
    int sz = sizeof(arr)/sizeof(arr[0]);
    //一级指针p，传给函数
    print(p, sz);  //等价写法：printf(arr,sz)
    return 0;
}
```



### 二级指针传参

```c
#include <stdio.h>

void test(int** ptr)
{
    printf("num = %d\n", **ptr);
}

int main()
{
    int n = 10;
    int* p = &n;
    int **pp = &p;
    test(pp);
    test(&p);
    return 0;
}
```

