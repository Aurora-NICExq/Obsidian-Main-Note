---
tags:
  - c语言
---

作用：根据一个变量或表达式的值，决定程序直接跳转到哪一条路去执行。

## 基本语法结构
`switch`核心逻辑是：计算括号内表达式的值，然后与下面各个 `case` 后的常量进行匹配。一旦匹配成功，就从该位置开始向下执行。
```c
switch (表达式) {
    case 常量1:
        // 当表达式的值等于常量1时执行的代码
        语句1;
        break; // 跳出 switch
    
    case 常量2:
        // 当表达式的值等于常量2时执行的代码
        语句2;
        break; 

    // ... 可以有任意多个 case ...

    default:
        // 当上述所有 case 都不匹配时执行的代码（相当于 if 里的 else）
        语句n;
        break;
}
```

### 核心规则
#### 表达式类型限制

`switch(表达式)` 中的表达式，返回值必须是 **整型（int, long等）** 或 **字符型（char）**。

#### case 后必须是常量

`case` 后面只能跟常量或常量表达式，**不能是变量**或**范围**。
(可以跟字符，字符在程序中以ASCII形式存在)

#### break 的作用（防止“穿透”）

`switch` 有一个特性叫**穿透（Fall-through）**。如果在 `case` 语句块最后忘了写 `break;`，程序会**继续向下执行下一个 case 的代码**，而不管下一个 case 是否匹配，直到遇到 `break` 或 switch 结束为止。

####  default 是可选的

`default` 相当于 `if-else` 结构中的 `else`。它不是必须的，但为了程序的健壮性，通常建议加上，用于处理“意料之外”的数值。

## 程序示例

#### 示例 A：标准用法（判断星期）
```c
#include <stdio.h>

int main() {
    int day = 3;

    switch (day) {
        case 1:
            printf("今天是星期一\n");
            break;
        case 2:
            printf("今天是星期二\n");
            break;
        case 3:
            printf("今天是星期三\n");
            break;
        default:
            printf("输入错误，请输入1-3之间的数字\n");
            break; 
    }
    return 0;
}
// 输出结果：今天是星期三
```

#### 示例 B：利用“穿透”特性（多个值执行相同逻辑）
```c
#include <stdio.h>
int main() {
    char score = 'B';

    switch (score) {
        case 'A':
        case 'B':
        case 'C':
            // 无论是 A, B 还是 C，都会走到这里
            printf("恭喜，你的成绩及格了！\n");
            break;
        case 'D':
            printf("很遗憾，你需要补考。\n");
            break;
        default:
            printf("无效的成绩等级。\n");
    }
    return 0;
}
// 输出结果：恭喜，你的成绩及格了！
```

## switch 与 if-else 的区别

|**特性**|**switch 语句**|**if-else 语句**|
|---|---|---|
|**适用场景**|针对**单个变量**的**离散数值**进行精确匹配（等于判断）。|适用于**范围判断**（大于、小于）、浮点数判断、多变量复杂逻辑。|
|**代码清晰度**|分支很多时，结构清晰，一目了然。|分支过多时（嵌套过深），代码可读性变差。|
|**执行效率**|编译器通常会建立“跳转表”，分支较多时效率很高。|需要逐条判断，分支越多越慢。|

`case` 后面可以跟字符（例如 `'A'`, `'b'`, `'+'` 等）。

原因：**在 C 语言的里，字符（char）本质上就是整数（int）。**

