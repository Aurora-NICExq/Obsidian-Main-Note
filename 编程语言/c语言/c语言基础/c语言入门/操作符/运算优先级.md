---
tags:
  - c语言
  - 操作符
---
### 优先级最高

谁在变量的右边，谁就跟变量最亲。

| **运算符**     | **描述**     | **例子**    | **结合方向** |
| ----------- | ---------- | --------- | -------- |
| `()`        | 括号         | `(a + b)` | 左到右      |
| `[]`        | 数组下标       | `a[1]`    | 左到右      |
| `.`         | 结构体成员      | `s.a`     | 左到右      |
| `->`        | 指针成员       | `p->a`    | 左到右      |
| `++` / `--` | **后缀**自增/减 | `p++`     | **左到右**  |

### 前缀与单目（优先级次之）
| **运算符**     | **描述**     | **例子**        | **结合方向** |
| ----------- | ---------- | ------------- | -------- |
| `++` / `--` | **前缀**自增/减 | `++p`         | **右到左**  |
| `*`         | 指针解引用      | `*p`          | **右到左**  |
| `&`         | 取地址        | `&a`          | **右到左**  |
| `sizeof`    | 长度计算       | `sizeof(int)` | **右到左**  |
| `(type)`    | 强制转换       | `(int*)p`     | **右到左**  |

### 算术与赋值（优先级较低）

普通的加减乘除，以及最后的赋值。

|**运算符**|**描述**|**例子**|
|---|---|---|
|`*` `/` `%`|乘除模|`a * b`|
|`+` `-`|加减|`p + 1`|
|`=`|赋值|`a = b`|
|`,`|逗号|`a, b`|

### 指针相关

#### `*p++` (最经典)

- **分析：**
    
    - **后缀 `++`** (第一梯队) 优先级 **高于** **解引用 `*`** (第二梯队)。
        
    - 所以，它等价于 `*(p++)`。
        
- **执行逻辑：**
    
    1. `++` 作用于 `p`（指针移动），但因为是**后缀**，表达式返回的是 `p` **移动前**的值（旧地址）。
        
    2. `*` 作用于这个**旧地址**。
        
    3. **结果：** 取出当前值 10，然后指针移向下一个位置。
        
- **场景：** 遍历数组 `while(*p++)`。
    

#### 2. `(*p)++`

- **分析：**
    
    - 有括号 `()`，强制先算里面。
        
    - 先执行 `*p`，取出了值（比如 10）。
        
    - 再对这个**值**进行后缀 `++`。
        
- **执行逻辑：**
    
    1. 取出 10。
        
    2. 将内存里的 10 变为 11。
        
    3. 但表达式的值是 10（因为后缀返回旧值）。
        
- **结果：** 指针位置没动，内存里的数加了 1。
    

#### 3. `*++p`

- **分析：**
    
    - `*` 和 **前缀 `++`** 都在第二梯队。
        
    - 第二梯队规则是 **从右向左结合**。
        
    - 所以先算右边的 `++p`，再算左边的 `*`。
        
- **执行逻辑：**
    
    1. `p` 先向后移动一位（新地址）。
        
    2. `*` 解引用这个**新地址**。
        
- **结果：** 指针移了，取出了下一个数。
    

#### 4. `++*p`

- **分析：**
    
    - 同样是第二梯队，**从右向左结合**。
        
    - 先看最右边的 `p`，紧挨着它的是 `*`。先算 `*p`。
        
    - 再算最左边的 `++`。
        
- **执行逻辑：**
    
    1. `*p` 取出当前值 10。
        
    2. `++` 作用于这个值（前缀自增，直接加 1）。
        
- **结果：** 指针没动，内存里的数变成了 11，表达式的值也是 11。