---
tags:
  - c语言
  - 操作符
---

#### 逗号运算符

^1a61f0

```c
#include <stdio.h>
int main() {
    int a[3][2] = { (0,1), (2,3), (4,5) };
    int *p = a[0];
    printf("%d", p[0]);
    return 0;
}
```
括号中的逗号运算符 `(0,1)`，它会评估两边并返回右边的值（1），而不是将 0 和 1 分别作为两个元素。

#### 宏定义与自增操作符

^b94b3a

```c
#define MIN(a, b) ((a) < (b) ? (a) : (b))
int i = 1, j = 2;
printf("%d", MIN(i++, j++));
```
1. 宏展开为：`((i++) < (j++) ? (i++) : (j++))`。
    
2. 先比较：`1 < 2` 为真。此时 `i` 变为 2，`j` 变为 3。
    
3. 因为条件为真，执行三元运算符的第一部分：再次执行 `(i++)`。
    
4. 表达式返回 `i` 的旧值 2，`i` 再次自增变为 3。
    
5. 最终输出表达式的值 2。