---
tags:
  - Multivariable_Calculus
---

当变量之间被方程约束住时，“偏导数到底在固定谁？”会变成这节课的核心哲学问题（也是常见丢分点）。

------

## 解决什么问题

很多物理/化学场景里，变量不是自由的：比如 $P,V,T$ 满足 $PV=nRT$。此时想讨论“对 $P$ 的变化率”“对 $V$ 的偏导”，必须先说清楚 “变化时固定了谁”

我们用一个标准模型表达“非独立”：
$$
g(x,y,z)=c
$$
通常可把它理解为：在局部把 $z$ 看成 $z(x,y)$（即由约束决定）。

------

## 全微分把约束“线性化”

对约束方程做全微分：
$$
dg = g_x\,dx + g_y\,dy + g_z\,dz = 0
$$
这条式子本质是：在约束面上，小变化 $(dx,dy,dz)$ 不能乱来，必须满足上式。

### 2.1 计算“被约束的” $\partial z/\partial x$

如果我们把 $z$ 视为 $z(x,y)$，那么

- $\left(\dfrac{\partial z}{\partial x}\right)_y$ 表示：**动 $x$，固定 $y$**（所以令 $dy=0$）
- $\left(\dfrac{\partial z}{\partial y}\right)_x$ 表示：**动 $y$，固定 $x$**（所以令 $dx=0$）

从 $g_xdx+g_ydy+g_zdz=0$ 直接解出：
$$
\left(\frac{\partial z}{\partial x}\right)_y = -\frac{g_x}{g_z},\qquad
\left(\frac{\partial z}{\partial y}\right)_x = -\frac{g_y}{g_z}
$$
（前提是 $g_z\neq 0$，否则不能在局部用 $z=z(x,y)$ 来描述。）

------

## 偏导符号

同一个函数，换变量后偏导可能变了，不是算错，是**固定条件变了**。

例：$f(x,y)=x+y$，若令 $x=u,\ y=u+v$，则 $f=2u+v$。于是
$$
\frac{\partial f}{\partial x}=1,\quad \frac{\partial f}{\partial u}=2
$$
但 $x=u$ ，为什么不相等？因为

- $\partial/\partial x$：固定的是 $y$
- $\partial/\partial u$：固定的是 $v$（等价于固定 $y-x$）

所以必须在有歧义时写成 $\left(\dfrac{\partial f}{\partial x}\right)_y$、$\left(\dfrac{\partial f}{\partial u}\right)_v$ 这类记号，明确“谁被按住不动”。

------

## 求“带约束的偏导”

设 $f=f(x,y,z)$ 且约束 $g(x,y,z)=c$。想求类似 $\left(\dfrac{\partial f}{\partial z}\right)_y$ 这种“固定 $y$，把 $z$ 当自变量”的变化率（注意： $x$ 会被约束牵着走）。

### 微分消元法

1. 写

$$
df=f_xdx+f_y dy+f_zdz
$$

1. 因为固定 $y$，令 $dy=0$
2. 用约束微分式 $dg=g_xdx+g_y dy+g_zdz=0$，同样令 $dy=0$，解出 $dx$ 用 $dz$ 表示
3. 代回 $df$，就得到 $df = \left(\dfrac{\partial f}{\partial z}\right)_y dz$

固定 $y$ 后用约束消去 $dx$，最终得到 $\left(\dfrac{\partial f}{\partial z}\right)_y$ 的表达式。

### 链式法则法

把 $x$ 视为 $x(y,z)$ 或 $x=z$ 的函数，用链式法则把 $\left(\dfrac{\partial f}{\partial z}\right)_y$ 展开成 $f_x\left(\dfrac{\partial x}{\partial z}\right)_y+f_z$；再对约束 $g$ 做同样展开得到 $\left(\dfrac{\partial x}{\partial z}\right)_y$，代回即可。

> 这两条路线本质在算同一件事：**约束面上的允许方向**，只是写法不同。

------

## 例题

面积
$$
A=\frac12 ab\sin\theta
$$
如果三角形还是直角三角形且 $b$ 为斜边，则约束
$$
a=b\cos\theta
$$
这时“$A$ 对 $\theta$ 的变化率”至少有三种合理含义：

1. 把 $a,b,\theta$ 当独立变量：求普通的 $\left(\dfrac{\partial A}{\partial \theta}\right)_{a,b}$
2. 在约束下固定 $a$：求 $\left(\dfrac{\partial A}{\partial \theta}\right)_a$（此时 $b$ 会随 $\theta$ 变以维持约束）
3. 在约束下固定 $b$：求 $\left(\dfrac{\partial A}{\partial \theta}\right)_b$（此时 $a$ 会随 $\theta$ 变）

如何算 $\left(\dfrac{\partial A}{\partial \theta}\right)_a$：可以“代入法”先用约束消元，也可以“全微分+约束消元/隐式微分”。并给出了结果
$$
\left(\frac{\partial A}{\partial \theta}\right)_a=\frac12 ab\sec\theta
$$

------

## 易错点清单

- **不写“固定谁”就直接算偏导**：变量有约束时，$\partial/\partial x$ 不再天然明确。
- **把“变量同名”当成“偏导相等”**：$x=u$ 并不推出 $\left(\partial f/\partial x\right)_y=\left(\partial f/\partial u\right)_v$。
- **忘了用约束消元**：算 $\left(\partial f/\partial z\right)_y$ 时，$x$ 往往不是常量，它会被约束拖着走。
- **分不清“普通偏导 $f_x$” vs “约束偏导”**：前者把 $x,y,z$ 当独立变量；后者是在约束面上沿某种“固定条件”的方向变化。

------

## 练习

1. 约束 $x^2+yz+z^3=8$。在点 $(2,3,1)$ 处求 $\left(\dfrac{\partial z}{\partial x}\right)_y$、$\left(\dfrac{\partial z}{\partial y}\right)_x$
2. 设 $f(x,y,z)=x+yz$，同一约束 $g(x,y,z)=8$。求 $\left(\dfrac{\partial f}{\partial z}\right)_y$
3. 自己构造一个变换 $x=u,\ y=u+v$ 的例子，写清楚 $\left(\dfrac{\partial}{\partial x}\right)_y$ 与 $\left(\dfrac{\partial}{\partial u}\right)_v$ 的差别在哪里。

**偏导数=“沿着某个固定条件方向的变化率”，先写清楚固定谁，再动手。**
