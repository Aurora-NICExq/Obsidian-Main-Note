---
tags:
  - LinearAlgebra
  - projection
---
## 投影的概念
在数学上，我们将向量 $\mathbf{b}$ 投影到向量 $\mathbf{a}$（或某个子空间）上，实际上是在做**向量分解**：

$$\mathbf{b} = \mathbf{p} + \mathbf{e}$$

- **$\mathbf{p}$ (投影向量):** 是 $\mathbf{b}$ 在 $\mathbf{a}$ 方向上的分量。它与 $\mathbf{a}$ 平行。
    
- **$\mathbf{e}$ (误差向量):** 是 $\mathbf{b}$ 中与 $\mathbf{a}$ 无关的部分。它与 $\mathbf{a}$ **正交（垂直）**。[[正交向量和正交子空间(orthogonal)#向量的正交]]

> **核心思想**：投影的本质是寻找一个向量在另一个方向（或空间）上的“分身”，且这个分身与原向量的距离（误差）是最小的。

### 投影向量的系数
$$
x a^T a = a^T b
$$

$$
x = \frac{a^T b}{a^T a}
$$

$$
p = a x
$$

## 投影矩阵


### 内积与外积
假设向量 $a$ 是一个 $n \times 1$ 的列向量（$n$ 行 1 列）。

#### 分母：$a^T a$ (内积)

- $a^T$ 是 $1 \times n$（行向量）。
    
- $a$ 是 $n \times 1$（列向量）。
    
- 乘法规则：$(1 \times n) \cdot (n \times 1) \rightarrow 1 \times 1$。
    
- **结果**：这是一个**标量 (Scalar)**，也就是一个普通的数字（其实就是向量长度的平方）。
    

#### 分子：$aa^T$ (外积)

- $a$ 是 $n \times 1$（列向量）。
    
- $a^T$ 是 $1 \times n$（行向量）。
    
- 乘法规则：$(n \times 1) \cdot (1 \times n) \rightarrow n \times n$。
    
- **结果**：这是一个 $n \times n$ 的**方阵 (Square Matrix)**。
#### 2. 结论

把它们放在一起时：

$$\frac{a a^T}{a^T a} = \frac{\text{矩阵}}{\text{数字}} = \text{矩阵}$$
### 投影矩阵

^36ed38

**投影矩阵 (Projection Matrix)**，$P$
$$P = \frac{aa^T}{a^Ta}$$
把任何向量 $b$ 乘以这个矩阵 $P$ 时（即 $Pb$），得到的结果就是 $b$ 在 $a$ 上的投影 $p$。[[投影、投影矩阵#投影向量的系数]]（$p=ax$）  ^a956d5

#### 投影矩阵的列空间
设 $a = \begin{bmatrix} a_1 \\ a_2 \\ \vdots \\ a_n \end{bmatrix}$。

当我们计算外积 $aa^T$ 时：

$$aa^T = \begin{bmatrix} a_1 \\ a_2 \\ \vdots \\ a_n \end{bmatrix} \begin{bmatrix} a_1 & a_2 & \dots & a_n \end{bmatrix}$$

根据矩阵乘法规则，得到的矩阵：

$$aa^T = \begin{bmatrix} | & | & & | \\ a_1 \mathbf{a} & a_2 \mathbf{a} & \dots & a_n \mathbf{a} \\ | & | & & | \end{bmatrix}$$
结论：矩阵的每一列都是向量 $a$ 的线性倍数。
因为列空间是由所有列张成（Span）的空间，既然所有列都在 $a$ 的方向上，那么它们张成的空间自然就是一条线，而且就是由 $a$ 确定的那条线。这也意味着这个矩阵的秩 (Rank) 为 1。[[向量组的性质#列空间]]

#### 投影矩阵的性质
$P$ 矩阵有两个性质：

1. **对称性**：$P^T = P$。
    证明：从分母角度看（分子是个常数）$$(a a^T)^T = (a^T)^T (a)^T = a a^T$$
	结论：投影矩阵具有对称性[[矩阵#对称矩阵]]
2. **幂等性**：$P^2 = P$（如果你投影两次，结果和投影一次是一样的，影子再投影还是影子）。
	证明:运用矩阵乘法结合律[[矩阵#乘法的结合律]]$$\begin{align} P^2 &= \frac{1}{(a^Ta)^2} \cdot (a^T a) \cdot (aa^T) \\ &= \frac{a^T a}{(a^Ta)^2} (aa^T) \\ &= \frac{1}{a^Ta} (aa^T) \\ &= P \end{align}$$
	第二次投影作用在投影向量$p$上而不是向量$b$上

## 投影与可解性问题

### 矩阵方程无解的情况
![[正交向量和正交子空间(orthogonal)#^47c8b0]]


### 解决方法

#### 最优解
$Ax=b$ 无解，寻找一个**最接近**的解
- **投影的引入：** 将向量 $b$ **投影**（Project）到列空间 $C(A)$ 上，得到一个新的向量 $p$。
- **关键联系：**
    - 虽然 $b$ 不在列空间里，但 $p$ **一定在**列空间里。
    - 因此，方程 $A\hat{x} = p$ 是**一定有解**的（Solvable）。
这里的 $\hat{x}$ 就是“最优解”（Best Solution）。

#### 误差向量 $e$
1. **定义误差：** 误差向量 $e = b - p$。
2. **几何直观：** 为了让 $p$ 最接近 $b$，误差向量 $e$ 必须**垂直**（正交）于列空间 $C(A)$。
3. **数学推导：**
    - 如果 $e$ 垂直于 $C(A)$，那么 $e$ 必须垂直于 $A$ 的每一个列向量。
    - 即$A^T e = 0$（即 $e$ 位于 $A^T$ 的零空间中）。  当矩阵是对称矩阵的时候，$e$同时位于零空间中

### 正规方程（Normal Equations）
1. 我们知道 $p = A\hat{x}$。
2. 代入 $e = b - A\hat{x}$。
3. 根据正交性 $A^T e = 0$，得到：$$A^T (b - A\hat{x}) = 0$$
4. 展开后得到正规方程：$$A^T A \hat{x} = A^T b$$ ^325100

## 投影矩阵公式推导

^102d65

### 正规方程求解 $\hat{x}$ 和 $p$
如果 $A$ 的列是线性无关的，则 $A^T A$ 可逆。
1. 求系数 $\hat{x}$：$$\hat{x} = (A^T A)^{-1} A^T b$$
2. 求投影向量 $p$：将 $\hat{x}$ 代回 $p = A\hat{x}$：$$p = A (A^T A)^{-1} A^T b$$

### 投影矩阵 $P$
$$P = A (A^T A)^{-1} A^T$$


