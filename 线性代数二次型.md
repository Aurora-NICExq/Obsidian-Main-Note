在多元微积分里，你在某个点附近看到的“马鞍/杯/帽”这类形状，**本质上就是线性代数里的二次型在局部支配了形状**。

把联系讲清楚，只需要一个核心公式：**泰勒展开的二阶项**。

------

多元函数的局部形状 = 一阶线性项 + 二阶二次型项

设 $f:\mathbb R^n\to\mathbb R$，在点 $a$ 附近：
$$
f(a+h)\approx f(a)+\nabla f(a)^\top h+\frac12\,h^\top H(a)\,h
$$

- $\nabla f(a)$ 是梯度（线性项，决定“往哪边上升最快”）。
- $H(a)$ 是 Hessian 矩阵（海森矩阵），元素为二阶偏导：

$$
H(a)=\left[\frac{\partial^2 f}{\partial x_i\partial x_j}(a)\right]
$$

- 关键：$\frac12 h^\top H(a)h$ **就是线性代数中的二次型**。

如果你在一个点上满足 $\nabla f(a)=0$（临界点），那局部形状几乎完全由
$$
h^\top H(a)h
$$
决定，于是“杯状/帽状/马鞍”就和二次型的正定性一一对应了。

------

杯、帽、马鞍 = Hessian 的正定性（线性代数直连）

在临界点 $a$：

- **正定**：$h^\top H h>0$（对所有非零 $h$）
   $\Rightarrow$ 局部像“杯” $\Rightarrow$ **局部极小值**
- **负定**：$h^\top H h<0$
   $\Rightarrow$ 局部像“倒扣的杯/帽” $\Rightarrow$ **局部极大值**
- **不定**：有的方向 $>0$，有的方向 $<0$
   $\Rightarrow$ **马鞍点**
- **半正定/半负定**（有方向为 0）
   $\Rightarrow$ 二阶判别不够，需要看更高阶项（会出现“平坦谷底/脊线”那种）。

这就是你熟悉的二次型分类，只不过矩阵从“给定的 $A$”变成了“函数自己长出来的 $H(a)$”。

------

怎么用线代的方法“看懂”它：特征值分解 = 主轴方向

因为 Hessian（在常见条件下）是对称矩阵，所以可以正交对角化：
$$
H = Q\Lambda Q^\top,\quad \Lambda=\mathrm{diag}(\lambda_1,\dots,\lambda_n)
$$
令 $z=Q^\top h$，则
$$
h^\top H h = z^\top \Lambda z=\sum_{i=1}^n \lambda_i z_i^2
$$
这句话非常强：

- **$Q$** 给出“主轴方向”（沿哪些方向弯曲最纯粹）
- **$\lambda_i$** 给出“曲率强度与正负”（正：向上弯；负：向下弯；绝对值越大越陡）

所以：

- 全部 $\lambda_i>0$ → 杯
- 全部 $\lambda_i<0$ → 帽
- 有正有负 → 马鞍

你看到的“杯/马鞍”，在数学上就是“二次型在正交变换下变成 $\sum \lambda_i z_i^2$”。

------

二元函数的“判别式”其实就是 2×2 二次型判别

二元函数在临界点的 Hessian：
$$
H=\begin{pmatrix} f_{xx} & f_{xy}\\ f_{yx} & f_{yy}\end{pmatrix}
$$
线代里判断正定性常用主子式；在微积分里就变成经典二阶判别法：

令
$$
D = f_{xx}f_{yy}-(f_{xy})^2 = \det(H)
$$

- 若 $D>0$ 且 $f_{xx}>0$ → 极小（杯）
- 若 $D>0$ 且 $f_{xx}<0$ → 极大（帽）
- 若 $D<0$ → 马鞍
- 若 $D=0$ → 二阶不够

这就是线代的“主子式判别”在 $2\times2$ 情况下的翻译版本。

------

再把“等高线”也连起来：二次型的水平集是二次曲线

临界点附近，
$$
f(a+h)\approx f(a)+\frac12 h^\top H h
$$
令 $f(a+h)=f(a)+c$，就得到
$$
h^\top H h \approx 2c
$$
这就是二次型的水平集：

- 正定 → 椭圆（盆形等高线）
- 不定 → 双曲线（马鞍等高线）
- 有零特征值 → 退化（二次曲线退化成平行线等）

所以你在图上看到的“等高线从椭圆变成双曲线”，本质是 Hessian 特征值符号变了。

------

一句话把两门课焊死在一起

**多元微积分在临界点附近的几何形状，由 Hessian 给出的二次型决定；而二次型的几何形状由线性代数里的特征值/正定性决定。**

这也是为什么优化（最小化/最大化）、牛顿法、最速下降这些方法都把线代当“发动机”。